(function(){"use strict";var e={1040:function(e,t,o){var s=o(5130),a=o(6768);const r={id:"app"};function n(e,t,o,s,n,l){const i=(0,a.g2)("router-link"),u=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",r,[(0,a.Lk)("header",null,[(0,a.Lk)("nav",null,[(0,a.bF)(i,{to:"/"},{default:(0,a.k6)((()=>[(0,a.eW)("Home")])),_:1}),(0,a.eW)(" | "),n.isAuthenticated?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(i,{key:0,to:"/login"},{default:(0,a.k6)((()=>[(0,a.eW)("Login")])),_:1})),(0,a.eW)(" | "),n.isAuthenticated?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(i,{key:1,to:"/register"},{default:(0,a.k6)((()=>[(0,a.eW)("Register")])),_:1})),(0,a.eW)(" | "),n.isAuthenticated?((0,a.uX)(),(0,a.Wv)(i,{key:2,to:"/profile"},{default:(0,a.k6)((()=>[(0,a.eW)("Profile")])),_:1})):(0,a.Q3)("",!0),(0,a.eW)(" | "),n.isAuthenticated?((0,a.uX)(),(0,a.Wv)(i,{key:3,to:"/dashboard"},{default:(0,a.k6)((()=>[(0,a.eW)("Dashboard")])),_:1})):(0,a.Q3)("",!0),(0,a.eW)(" | "),n.isAuthenticated?((0,a.uX)(),(0,a.CE)("button",{key:4,onClick:t[0]||(t[0]=(...e)=>l.logout&&l.logout(...e))},"Logout")):(0,a.Q3)("",!0)])]),(0,a.Lk)("main",null,[(0,a.bF)(u)])])}o(4114);var l={name:"App",data(){return{isAuthenticated:!!localStorage.getItem("accessToken")}},methods:{logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this.isAuthenticated=!1,this.$router.push("/login")},checkAuthStatus(){this.isAuthenticated=!!localStorage.getItem("accessToken")}},created(){this.checkAuthStatus(),this.$router.beforeEach(((e,t,o)=>{this.checkAuthStatus(),o()}))}},i=o(1241);const u=(0,i.A)(l,[["render",n]]);var d=u,c=o(1387);const m=e=>((0,a.Qi)("data-v-44bff880"),e=e(),(0,a.jt)(),e),p={class:"home"},h=m((()=>(0,a.Lk)("h1",null,"Welcome to Consultation App",-1))),k=m((()=>(0,a.Lk)("p",null,"This is the home page of our application.",-1)));function f(e,t,o,s,r,n){const l=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",p,[h,k,(0,a.Lk)("div",null,[(0,a.bF)(l,{to:"/login"},{default:(0,a.k6)((()=>[(0,a.eW)("Login")])),_:1}),(0,a.eW)(" | "),(0,a.bF)(l,{to:"/register"},{default:(0,a.k6)((()=>[(0,a.eW)("Register")])),_:1})])])}var L={name:"HomePage",data(){return{message:"Welcome to Consultation App"}}};const b=(0,i.A)(L,[["render",f],["__scopeId","data-v-44bff880"]]);var v=b,g=o(4232);const U=e=>((0,a.Qi)("data-v-bfd19762"),e=e(),(0,a.jt)(),e),C={class:"login"},y=U((()=>(0,a.Lk)("h1",null,"Login",-1))),w=U((()=>(0,a.Lk)("button",{type:"submit"},"Login",-1))),_={key:0,class:"error"};function F(e,t,o,r,n,l){return(0,a.uX)(),(0,a.CE)("div",C,[y,(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>l.login&&l.login(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),type:"email",placeholder:"Email",required:""},null,512),[[s.Jo,n.email]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),type:"password",placeholder:"Password",required:""},null,512),[[s.Jo,n.password]]),w],32),n.errorMessage?((0,a.uX)(),(0,a.CE)("p",_,(0,g.v_)(n.errorMessage),1)):(0,a.Q3)("",!0)])}var E=o(4373);const P="https://xammax.pythonanywhere.com/api/",S=E.A.create({baseURL:P,headers:{"Content-Type":"application/json"}});S.interceptors.request.use((e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers["Authorization"]=`Bearer ${t}`),e})),S.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(401===e.response.status&&!t._retry){t._retry=!0;const e=localStorage.getItem("refreshToken");if(e)try{const{data:o}=await E.A.post(`${P}token/refresh/`,{refresh:e});return localStorage.setItem("accessToken",o.access),t.headers["Authorization"]=`Bearer ${o.access}`,S(t)}catch(o){console.error("Refresh token failed",o),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),(void 0).$router.push("/login")}else localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),(void 0).$router.push("/login")}return Promise.reject(e)}));var A=S,M={name:"LoginPage",data(){return{email:"",password:"",errorMessage:""}},methods:{async login(){try{console.log("Sending login request with:",{email:this.email,password:this.password});const e=await A.post("login/",{email:this.email,password:this.password});console.log("Login successful:",e.data),localStorage.setItem("accessToken",e.data.access),localStorage.setItem("refreshToken",e.data.refresh),this.$router.push("/dashboard/")}catch(e){console.error("Login failed",e),e.response&&401===e.response.status?this.errorMessage="Invalid email or password.":this.errorMessage="An error occurred during login. Please try again."}}}};const X=(0,i.A)(M,[["render",F],["__scopeId","data-v-bfd19762"]]);var x=X;const I=e=>((0,a.Qi)("data-v-7bee589d"),e=e(),(0,a.jt)(),e),T={class:"register"},W=I((()=>(0,a.Lk)("h1",null,"Register",-1))),j={key:0};function Q(e,t,o,s,r,n){const l=(0,a.g2)("user-form");return(0,a.uX)(),(0,a.CE)("div",T,[W,(0,a.bF)(l,{form:r.form,"show-extra-fields":!0,"submit-button-text":"Register",onSubmit:n.register},null,8,["form","onSubmit"]),r.error?((0,a.uX)(),(0,a.CE)("p",j,(0,g.v_)(r.error),1)):(0,a.Q3)("",!0)])}const J=e=>((0,a.Qi)("data-v-1b66697a"),e=e(),(0,a.jt)(),e),V={class:"user-form"},$=J((()=>(0,a.Lk)("label",{for:"username"},"Username:",-1))),D=J((()=>(0,a.Lk)("label",{for:"email"},"Email:",-1))),O={key:0},N=J((()=>(0,a.Lk)("label",{for:"password"},"Password:",-1))),q={key:1},R=J((()=>(0,a.Lk)("label",{for:"confirm_password"},"Confirm Password:",-1))),B={type:"submit"};function H(e,t,o,r,n,l){return(0,a.uX)(),(0,a.CE)("div",V,[(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,a.Lk)("div",null,[$,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.localForm.username=e),type:"text",id:"username",required:""},null,512),[[s.Jo,n.localForm.username]])]),(0,a.Lk)("div",null,[D,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.localForm.email=e),type:"email",id:"email",required:""},null,512),[[s.Jo,n.localForm.email]])]),l.showPasswordField?((0,a.uX)(),(0,a.CE)("div",O,[N,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.localForm.password=e),type:"password",id:"password",required:""},null,512),[[s.Jo,n.localForm.password]])])):(0,a.Q3)("",!0),l.showPasswordField?((0,a.uX)(),(0,a.CE)("div",q,[R,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.localForm.confirm_password=e),type:"password",id:"confirm_password",required:""},null,512),[[s.Jo,n.localForm.confirm_password]])])):(0,a.Q3)("",!0),(0,a.Lk)("button",B,(0,g.v_)(o.submitButtonText),1)],32)])}var z={props:{form:{type:Object,required:!0},showExtraFields:{type:Boolean,default:!0},submitButtonText:{type:String,default:"Submit"}},data(){return{localForm:JSON.parse(JSON.stringify(this.form))}},computed:{showPasswordField(){return this.showExtraFields}},methods:{handleSubmit(){console.log("Submitting form data:",this.localForm),this.$emit("submit",this.localForm)}}};const K=(0,i.A)(z,[["render",H],["__scopeId","data-v-1b66697a"]]);var Y=K,G={name:"UserRegister",components:{UserForm:Y},data(){return{form:{username:"",email:"",password:"",confirm_password:""},error:null,isSubmitting:!1}},methods:{async register(e){if(this.isSubmitting)return;if(this.isSubmitting=!0,this.error&&(this.error=null),e.password!==e.confirm_password)return this.error="Passwords do not match",void(this.isSubmitting=!1);const t={username:e.username,email:e.email,password:e.password};console.log("Payload being sent:",t);try{const e=await A.post("register/",t,{headers:{"Content-Type":"application/json"}});console.log("Registration successful:",e.data),this.$router.push("login/")}catch(o){o.response&&o.response.data?(console.log("Error details:",o.response.data),this.error=o.response.data):this.error="Registration failed. Please try again."}finally{this.isSubmitting=!1}}}};const Z=(0,i.A)(G,[["render",Q],["__scopeId","data-v-7bee589d"]]);var ee=Z;const te=e=>((0,a.Qi)("data-v-20f1d8da"),e=e(),(0,a.jt)(),e),oe={class:"user-page-container"},se={class:"profile-section"},ae=te((()=>(0,a.Lk)("strong",null,"Email:",-1))),re=te((()=>(0,a.Lk)("strong",null,"First Name:",-1))),ne=te((()=>(0,a.Lk)("strong",null,"Last Name:",-1))),le=te((()=>(0,a.Lk)("strong",null,"Phone:",-1))),ie=te((()=>(0,a.Lk)("strong",null,"Address:",-1))),ue=te((()=>(0,a.Lk)("strong",null,"Bio:",-1))),de={key:0},ce=te((()=>(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,"Profile Photo:")],-1))),me=["src"];function pe(e,t,o,s,r,n){const l=(0,a.g2)("UserUpdate");return(0,a.uX)(),(0,a.CE)("div",oe,[(0,a.Lk)("h1",null,(0,g.v_)(r.user.username)+"'s Profile",1),(0,a.Lk)("div",se,[(0,a.Lk)("p",null,[ae,(0,a.eW)(" "+(0,g.v_)(r.user.email),1)]),(0,a.Lk)("p",null,[re,(0,a.eW)(" "+(0,g.v_)(r.user.first_name),1)]),(0,a.Lk)("p",null,[ne,(0,a.eW)(" "+(0,g.v_)(r.user.last_name),1)]),(0,a.Lk)("p",null,[le,(0,a.eW)(" "+(0,g.v_)(r.user.phone),1)]),(0,a.Lk)("p",null,[ie,(0,a.eW)(" "+(0,g.v_)(r.user.address),1)]),(0,a.Lk)("p",null,[ue,(0,a.eW)(" "+(0,g.v_)(r.user.bio),1)]),r.user.photo?((0,a.uX)(),(0,a.CE)("div",de,[ce,(0,a.Lk)("img",{src:r.user.photo,alt:"Profile Photo",class:"profile-photo"},null,8,me)])):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openUpdateForm&&n.openUpdateForm(...e))},"Edit Profile"),r.showUpdateForm?((0,a.uX)(),(0,a.Wv)(l,{key:0,user:r.user,onClose:n.closeUpdateForm},null,8,["user","onClose"])):(0,a.Q3)("",!0)])}const he=e=>((0,a.Qi)("data-v-4bc327ba"),e=e(),(0,a.jt)(),e),ke={class:"modal"},fe={class:"modal-content"},Le=he((()=>(0,a.Lk)("h2",null,"Edit Profile",-1))),be={class:"form-group"},ve=he((()=>(0,a.Lk)("label",{for:"username"},"Username:",-1))),ge={class:"form-group"},Ue=he((()=>(0,a.Lk)("label",{for:"email"},"Email:",-1))),Ce={class:"form-group"},ye=he((()=>(0,a.Lk)("label",{for:"first_name"},"First Name:",-1))),we={class:"form-group"},_e=he((()=>(0,a.Lk)("label",{for:"last_name"},"Last Name:",-1))),Fe={class:"form-group"},Ee=he((()=>(0,a.Lk)("label",{for:"phone"},"Phone:",-1))),Pe={class:"form-group"},Se=he((()=>(0,a.Lk)("label",{for:"address"},"Address:",-1))),Ae={class:"form-group"},Me=he((()=>(0,a.Lk)("label",{for:"bio"},"Bio:",-1))),Xe={class:"form-group"},xe=he((()=>(0,a.Lk)("label",{for:"photo"},"Profile Photo:",-1))),Ie=["src"],Te={class:"button-group"},We=he((()=>(0,a.Lk)("button",{type:"submit",class:"btn-save"},"Save Changes",-1)));function je(e,t,o,r,n,l){return(0,a.uX)(),(0,a.CE)("div",ke,[(0,a.Lk)("div",fe,[Le,(0,a.Lk)("form",{onSubmit:t[9]||(t[9]=(0,s.D$)(((...e)=>l.updateProfile&&l.updateProfile(...e)),["prevent"]))},[(0,a.Lk)("div",be,[ve,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.localUser.username=e),id:"username",type:"text",disabled:""},null,512),[[s.Jo,n.localUser.username]])]),(0,a.Lk)("div",ge,[Ue,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.localUser.email=e),id:"email",type:"email"},null,512),[[s.Jo,n.localUser.email]])]),(0,a.Lk)("div",Ce,[ye,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.localUser.first_name=e),id:"first_name",type:"text"},null,512),[[s.Jo,n.localUser.first_name]])]),(0,a.Lk)("div",we,[_e,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.localUser.last_name=e),id:"last_name",type:"text"},null,512),[[s.Jo,n.localUser.last_name]])]),(0,a.Lk)("div",Fe,[Ee,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.localUser.phone=e),id:"phone",type:"text"},null,512),[[s.Jo,n.localUser.phone]])]),(0,a.Lk)("div",Pe,[Se,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.localUser.address=e),id:"address",type:"text"},null,512),[[s.Jo,n.localUser.address]])]),(0,a.Lk)("div",Ae,[Me,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.localUser.bio=e),id:"bio"},null,512),[[s.Jo,n.localUser.bio]])]),(0,a.Lk)("div",Xe,[xe,(0,a.Lk)("input",{type:"file",onChange:t[7]||(t[7]=(...e)=>l.onPhotoChange&&l.onPhotoChange(...e)),id:"photo"},null,32),n.photoPreview?((0,a.uX)(),(0,a.CE)("img",{key:0,src:n.photoPreview,alt:"Profile Photo",class:"profile-photo-preview"},null,8,Ie)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Te,[We,(0,a.Lk)("button",{type:"button",class:"btn-cancel",onClick:t[8]||(t[8]=(...e)=>l.closeForm&&l.closeForm(...e))},"Cancel")])],32)])])}o(4603),o(7566),o(8721);var Qe={name:"UserUpdate",props:{user:{type:Object,required:!0}},data(){return{localUser:{...this.user},photoPreview:this.user.photo,newPhotoFile:null}},methods:{onPhotoChange(e){const t=e.target.files[0];t&&(this.newPhotoFile=t,this.photoPreview=URL.createObjectURL(t))},async updateProfile(){try{const e=new FormData;e.append("username",this.localUser.username),e.append("email",this.localUser.email),e.append("first_name",this.localUser.first_name),e.append("last_name",this.localUser.last_name),e.append("phone",this.localUser.phone),e.append("address",this.localUser.address),e.append("bio",this.localUser.bio),this.newPhotoFile&&e.append("photo",this.newPhotoFile);const t=await A.put("/profile/",e,{headers:{"Content-Type":"multipart/form-data"}});this.$emit("close",t.data),alert("Profile updated successfully!")}catch(e){console.error("Failed to update profile",e),alert("Failed to update profile. Please try again.")}},closeForm(){this.$emit("close")}}};const Je=(0,i.A)(Qe,[["render",je],["__scopeId","data-v-4bc327ba"]]);var Ve=Je,$e={name:"UserPage",components:{UserUpdate:Ve},data(){return{user:{},showUpdateForm:!1}},async created(){try{const e=await A.get("profile");this.user=e.data}catch(e){console.error("Failed to load user profile",e)}},methods:{openUpdateForm(){this.showUpdateForm=!0},closeUpdateForm(e){this.showUpdateForm=!1,e&&(this.user=e)}}};const De=(0,i.A)($e,[["render",pe],["__scopeId","data-v-20f1d8da"]]);var Oe=De;const Ne={class:"dashboard-container"},qe={key:1,class:"create-user-section"},Re={key:2,class:"modal"},Be={class:"modal-content"},He=(0,a.Lk)("h3",null,"Create User",-1);function ze(e,t,o,s,r,n){const l=(0,a.g2)("UserList"),i=(0,a.g2)("UserForm"),u=(0,a.g2)("ConsultationList");return(0,a.uX)(),(0,a.CE)("div",Ne,[(0,a.Lk)("h1",null,(0,g.v_)(r.username)+" Dashboard",1),r.isAdmin?((0,a.uX)(),(0,a.Wv)(l,{key:0,onUserCreated:n.refreshUserList,ref:"userList"},null,8,["onUserCreated"])):(0,a.Q3)("",!0),r.isAdmin?((0,a.uX)(),(0,a.CE)("div",qe,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openCreateUserModal&&n.openCreateUserModal(...e))},"Create New User")])):(0,a.Q3)("",!0),r.showCreateUserModal?((0,a.uX)(),(0,a.CE)("div",Re,[(0,a.Lk)("div",Be,[He,(0,a.bF)(i,{form:r.newUser,"submit-button-text":"Create User",onSubmit:n.createUser},null,8,["form","onSubmit"]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.closeCreateUserModal&&n.closeCreateUserModal(...e)),class:"cancel-button"},"Cancel")])])):(0,a.Q3)("",!0),(0,a.bF)(u)])}const Ke=e=>((0,a.Qi)("data-v-637b336d"),e=e(),(0,a.jt)(),e),Ye=Ke((()=>(0,a.Lk)("h2",null,"All Users",-1))),Ge=Ke((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"Email"),(0,a.Lk)("th",null,"Username"),(0,a.Lk)("th",null,"First Name"),(0,a.Lk)("th",null,"Last Name"),(0,a.Lk)("th",null,"Phone"),(0,a.Lk)("th",null,"Address"),(0,a.Lk)("th",null,"Bio"),(0,a.Lk)("th",null,"Photo"),(0,a.Lk)("th",null,"Doctor"),(0,a.Lk)("th",null,"User"),(0,a.Lk)("th",null,"Actions")])],-1))),Ze=["src"],et=["onClick"],tt=["onClick"],ot={key:0,class:"modal"},st={class:"modal-content"},at=Ke((()=>(0,a.Lk)("h3",null,"Edit User",-1))),rt=Ke((()=>(0,a.Lk)("label",{for:"edit-username"},"Username:",-1))),nt=Ke((()=>(0,a.Lk)("label",{for:"edit-email"},"Email:",-1))),lt=Ke((()=>(0,a.Lk)("label",{for:"edit-is-doctor"},"Is Doctor:",-1))),it=Ke((()=>(0,a.Lk)("label",{for:"edit-is-user"},"Is User:",-1))),ut=Ke((()=>(0,a.Lk)("label",{for:"edit-photo"},"Update Photo:",-1))),dt={class:"modal-buttons"};function ct(e,t,o,r,n,l){return(0,a.uX)(),(0,a.CE)("div",null,[Ye,(0,a.Lk)("table",null,[Ge,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.users,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,g.v_)(e.id),1),(0,a.Lk)("td",null,(0,g.v_)(e.email),1),(0,a.Lk)("td",null,(0,g.v_)(e.username),1),(0,a.Lk)("td",null,(0,g.v_)(e.first_name),1),(0,a.Lk)("td",null,(0,g.v_)(e.last_name),1),(0,a.Lk)("td",null,(0,g.v_)(e.phone),1),(0,a.Lk)("td",null,(0,g.v_)(e.address),1),(0,a.Lk)("td",null,(0,g.v_)(e.bio),1),(0,a.Lk)("td",null,[(0,a.Lk)("img",{src:e.photo,alt:"User Photo",class:"user-photo"},null,8,Ze)]),(0,a.Lk)("td",null,(0,g.v_)(e.is_doctor?"Yes":"No"),1),(0,a.Lk)("td",null,(0,g.v_)(e.is_user?"Yes":"No"),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:t=>l.editUser(e)},"Edit",8,et),(0,a.Lk)("button",{onClick:t=>l.deleteUser(e.id)},"Delete",8,tt)])])))),128))])]),n.showEditModal?((0,a.uX)(),(0,a.CE)("div",ot,[(0,a.Lk)("div",st,[at,rt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.editedUser.username=e),id:"edit-username",type:"text"},null,512),[[s.Jo,n.editedUser.username]]),nt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.editedUser.email=e),id:"edit-email",type:"email"},null,512),[[s.Jo,n.editedUser.email]]),lt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.editedUser.is_doctor=e),id:"edit-is-doctor",type:"checkbox"},null,512),[[s.lH,n.editedUser.is_doctor]]),it,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.editedUser.is_user=e),id:"edit-is-user",type:"checkbox"},null,512),[[s.lH,n.editedUser.is_user]]),ut,(0,a.Lk)("input",{type:"file",onChange:t[4]||(t[4]=(...e)=>l.onPhotoChange&&l.onPhotoChange(...e))},null,32),(0,a.Lk)("div",dt,[(0,a.Lk)("button",{onClick:t[5]||(t[5]=(...e)=>l.saveEditedUser&&l.saveEditedUser(...e))},"Save"),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.closeEditModal&&l.closeEditModal(...e)),class:"cancel-button"},"Cancel")])])])):(0,a.Q3)("",!0)])}var mt={data(){return{users:[],showEditModal:!1,editedUser:{},newPhotoFile:null}},async created(){await this.fetchUsers()},methods:{async fetchUsers(){try{const e=await A.get("/users/");this.users=e.data}catch(e){console.error("Failed to load users",e)}},editUser(e){this.editedUser={...e},this.showEditModal=!0},async saveEditedUser(){try{if(!this.editedUser.id)return void console.error("No user ID found");const e=new FormData;e.append("username",this.editedUser.username),e.append("email",this.editedUser.email),e.append("first_name",this.editedUser.first_name),e.append("last_name",this.editedUser.last_name),e.append("phone",this.editedUser.phone),e.append("address",this.editedUser.address),e.append("bio",this.editedUser.bio),e.append("is_doctor",this.editedUser.is_doctor),e.append("is_user",this.editedUser.is_user),this.newPhotoFile&&e.append("photo",this.newPhotoFile);const t=await A.put(`/users/${this.editedUser.id}/`,e,{headers:{"Content-Type":"multipart/form-data"}});console.log("User updated:",t.data),alert("User updated successfully!"),this.closeEditModal(),await this.fetchUsers()}catch(e){console.error("Failed to update user",e.response?e.response.data:e.message)}},onPhotoChange(e){const t=e.target.files[0];t&&(this.newPhotoFile=t)},closeEditModal(){this.showEditModal=!1,this.newPhotoFile=null},async deleteUser(e){try{const t=confirm("Are you sure you want to delete this user?");t&&(await A.delete(`/users/${e}/`),this.users=this.users.filter((t=>t.id!==e)),alert("User deleted successfully!"))}catch(t){console.error("Failed to delete user",t)}}}};const pt=(0,i.A)(mt,[["render",ct],["__scopeId","data-v-637b336d"]]);var ht=pt;const kt=e=>((0,a.Qi)("data-v-6740106e"),e=e(),(0,a.jt)(),e),ft=kt((()=>(0,a.Lk)("h2",null,"All Consultations",-1))),Lt=kt((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"Doctor"),(0,a.Lk)("th",null,"Patient"),(0,a.Lk)("th",null,"Date"),(0,a.Lk)("th",null,"Time"),(0,a.Lk)("th",null,"Notes"),(0,a.Lk)("th",null,"Actions")])],-1))),bt=["onClick"],vt=["onClick"],gt={key:0,class:"modal"},Ut={class:"modal-content"};function Ct(e,t,o,s,r,n){const l=(0,a.g2)("ConsultationForm");return(0,a.uX)(),(0,a.CE)("div",null,[ft,(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openCreateForm&&n.openCreateForm(...e))},"Create New Consultation"),(0,a.Lk)("table",null,[Lt,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(r.consultations,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,g.v_)(e.id),1),(0,a.Lk)("td",null,(0,g.v_)(e.doctor),1),(0,a.Lk)("td",null,(0,g.v_)(e.patient),1),(0,a.Lk)("td",null,(0,g.v_)(e.date),1),(0,a.Lk)("td",null,(0,g.v_)(e.time),1),(0,a.Lk)("td",null,(0,g.v_)(e.notes),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:t=>n.editConsultation(e)},"Edit",8,bt),(0,a.Lk)("button",{onClick:t=>n.deleteConsultation(e.id)},"Delete",8,vt)])])))),128))])]),r.showFormModal?((0,a.uX)(),(0,a.CE)("div",gt,[(0,a.Lk)("div",Ut,[(0,a.Lk)("h3",null,(0,g.v_)(r.isEditing?"Edit Consultation":"Create Consultation"),1),(0,a.bF)(l,{consultation:r.currentConsultation,submitButtonText:r.isEditing?"Save Changes":"Create Consultation",onSubmit:n.handleFormSubmit},null,8,["consultation","submitButtonText","onSubmit"]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.closeFormModal&&n.closeFormModal(...e)),class:"cancel-button"},"Cancel")])])):(0,a.Q3)("",!0)])}const yt=e=>((0,a.Qi)("data-v-e5b0d660"),e=e(),(0,a.jt)(),e),wt={class:"consultation-form"},_t=yt((()=>(0,a.Lk)("label",{for:"doctor"},"Doctor:",-1))),Ft=yt((()=>(0,a.Lk)("label",{for:"patient"},"Patient:",-1))),Et=yt((()=>(0,a.Lk)("label",{for:"date"},"Date:",-1))),Pt=yt((()=>(0,a.Lk)("label",{for:"time"},"Time:",-1))),St=yt((()=>(0,a.Lk)("label",{for:"notes"},"Notes:",-1))),At={type:"submit"};function Mt(e,t,o,r,n,l){return(0,a.uX)(),(0,a.CE)("div",wt,[(0,a.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>l.handleSubmit&&l.handleSubmit(...e)),["prevent"]))},[(0,a.Lk)("div",null,[_t,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.localConsultation.doctor=e),id:"doctor",type:"text"},null,512),[[s.Jo,n.localConsultation.doctor]])]),(0,a.Lk)("div",null,[Ft,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.localConsultation.patient=e),id:"patient",type:"text"},null,512),[[s.Jo,n.localConsultation.patient]])]),(0,a.Lk)("div",null,[Et,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.localConsultation.date=e),id:"date",type:"date"},null,512),[[s.Jo,n.localConsultation.date]])]),(0,a.Lk)("div",null,[Pt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.localConsultation.time=e),id:"time",type:"time"},null,512),[[s.Jo,n.localConsultation.time]])]),(0,a.Lk)("div",null,[St,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.localConsultation.notes=e),id:"notes"},null,512),[[s.Jo,n.localConsultation.notes]])]),(0,a.Lk)("button",At,(0,g.v_)(o.submitButtonText),1)],32)])}var Xt={props:{consultation:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"}},data(){return{localConsultation:{...this.consultation}}},methods:{handleSubmit(){this.$emit("submit",this.localConsultation)}}};const xt=(0,i.A)(Xt,[["render",Mt],["__scopeId","data-v-e5b0d660"]]);var It=xt,Tt={components:{ConsultationForm:It},data(){return{consultations:[],showFormModal:!1,currentConsultation:{},isEditing:!1}},async created(){await this.fetchConsultations()},methods:{async fetchConsultations(){try{const e=await A.get("/consultations/");this.consultations=e.data}catch(e){console.error("Failed to load consultations",e)}},openCreateForm(){this.currentConsultation={doctor:"",patient:"",date:"",time:"",notes:""},this.isEditing=!1,this.showFormModal=!0},editConsultation(e){this.currentConsultation={...e},this.isEditing=!0,this.showFormModal=!0},async handleFormSubmit(e){try{this.isEditing?(await A.put(`/consultations/${e.id}/`,e),alert("Consultation updated successfully!")):(await A.post("/consultations/",e),alert("Consultation created successfully!")),this.closeFormModal(),await this.fetchConsultations()}catch(t){console.error("Failed to save consultation",t.response?t.response.data:t.message)}},async deleteConsultation(e){try{const t=confirm("Are you sure you want to delete this consultation?");t&&(await A.delete(`/consultations/${e}/`),this.consultations=this.consultations.filter((t=>t.id!==e)),alert("Consultation deleted successfully!"))}catch(t){console.error("Failed to delete consultation",t)}},closeFormModal(){this.showFormModal=!1}}};const Wt=(0,i.A)(Tt,[["render",Ct],["__scopeId","data-v-6740106e"]]);var jt=Wt,Qt={name:"DashboardPage",components:{UserList:ht,ConsultationList:jt,UserForm:Y},data(){return{username:"",isAdmin:!1,showCreateUserModal:!1,newUser:{username:"",email:""}}},async created(){await this.checkUserRole()},methods:{async checkUserRole(){try{const e=await A.get("/auth/user/");this.username=e.data.username,this.isAdmin=e.data.is_superuser}catch(e){console.error("Failed to check user role",e)}},openCreateUserModal(){this.showCreateUserModal=!0},closeCreateUserModal(){this.showCreateUserModal=!1},async createUser(e){try{const t=await A.post("/users/",e);console.log("User created:",t.data),this.showCreateUserModal=!1,this.refreshUserList()}catch(t){console.error("Failed to create user",t.response?t.response.data:t.message)}},refreshUserList(){this.$refs.userList.fetchUsers()}}};const Jt=(0,i.A)(Qt,[["render",ze]]);var Vt=Jt;const $t=[{path:"/",name:"home",component:v},{path:"/login",name:"login",component:x},{path:"/register",name:"register",component:ee},{path:"/profile",name:"profile",component:Oe,meta:{requiresAuth:!0}},{path:"/dashboard",name:"dashboard",component:Vt,meta:{requiresAuth:!0}}],Dt=(0,c.aE)({history:(0,c.LA)(),routes:$t});Dt.beforeEach(((e,t,o)=>{const s=e.matched.some((e=>e.meta.requiresAuth)),a=!!localStorage.getItem("accessToken");s&&!a?o("/login"):o()}));var Ot=Dt;const Nt=(0,s.Ef)(d);Nt.use(Ot),Nt.mount("#app")}},t={};function o(s){var a=t[s];if(void 0!==a)return a.exports;var r=t[s]={exports:{}};return e[s].call(r.exports,r,r.exports,o),r.exports}o.m=e,function(){var e=[];o.O=function(t,s,a,r){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],r=e[d][2];for(var l=!0,i=0;i<s.length;i++)(!1&r||n>=r)&&Object.keys(o.O).every((function(e){return o.O[e](s[i])}))?s.splice(i--,1):(l=!1,r<n&&(n=r));if(l){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[s,a,r]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,r,n=s[0],l=s[1],i=s[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(a in l)o.o(l,a)&&(o.m[a]=l[a]);if(i)var d=i(o)}for(t&&t(s);u<n.length;u++)r=n[u],o.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return o.O(d)},s=self["webpackChunkmedical_project"]=self["webpackChunkmedical_project"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(1040)}));s=o.O(s)})();
//# sourceMappingURL=app.d03ccab7.js.map