(function(){"use strict";var e={2700:function(e,t,o){var s=o(5130),a=o(6768);const l={id:"app"};function n(e,t,o,s,n,r){const i=(0,a.g2)("router-link"),u=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",l,[(0,a.Lk)("header",null,[(0,a.Lk)("nav",null,[(0,a.bF)(i,{to:"/"},{default:(0,a.k6)((()=>[(0,a.eW)("Home")])),_:1}),(0,a.eW)(" | "),n.isAuthenticated?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(i,{key:0,to:"/login"},{default:(0,a.k6)((()=>[(0,a.eW)("Login")])),_:1})),(0,a.eW)(" | "),n.isAuthenticated?(0,a.Q3)("",!0):((0,a.uX)(),(0,a.Wv)(i,{key:1,to:"/register"},{default:(0,a.k6)((()=>[(0,a.eW)("Register")])),_:1})),(0,a.eW)(" | "),n.isAuthenticated?((0,a.uX)(),(0,a.Wv)(i,{key:2,to:"/profile"},{default:(0,a.k6)((()=>[(0,a.eW)("Profile")])),_:1})):(0,a.Q3)("",!0),(0,a.eW)(" | "),n.isAuthenticated?((0,a.uX)(),(0,a.Wv)(i,{key:3,to:"/dashboard"},{default:(0,a.k6)((()=>[(0,a.eW)("Dashboard")])),_:1})):(0,a.Q3)("",!0),(0,a.eW)(" | "),n.isAuthenticated?((0,a.uX)(),(0,a.CE)("button",{key:4,onClick:t[0]||(t[0]=(...e)=>r.logout&&r.logout(...e))},"Logout")):(0,a.Q3)("",!0)])]),(0,a.Lk)("main",null,[(0,a.bF)(u)])])}o(4114);var r={name:"App",data(){return{isAuthenticated:!!localStorage.getItem("accessToken")}},methods:{logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this.isAuthenticated=!1,this.$router.push("/login")},checkAuthStatus(){this.isAuthenticated=!!localStorage.getItem("accessToken")}},created(){this.checkAuthStatus(),this.$router.beforeEach(((e,t,o)=>{this.checkAuthStatus(),o()}))}},i=o(1241);const u=(0,i.A)(r,[["render",n]]);var d=u,c=o(1387);const p=e=>((0,a.Qi)("data-v-44bff880"),e=e(),(0,a.jt)(),e),m={class:"home"},h=p((()=>(0,a.Lk)("h1",null,"Welcome to Consultation App",-1))),k=p((()=>(0,a.Lk)("p",null,"This is the home page of our application.",-1)));function f(e,t,o,s,l,n){const r=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",m,[h,k,(0,a.Lk)("div",null,[(0,a.bF)(r,{to:"/login"},{default:(0,a.k6)((()=>[(0,a.eW)("Login")])),_:1}),(0,a.eW)(" | "),(0,a.bF)(r,{to:"/register"},{default:(0,a.k6)((()=>[(0,a.eW)("Register")])),_:1})])])}var L={name:"HomePage",data(){return{message:"Welcome to Consultation App"}}};const b=(0,i.A)(L,[["render",f],["__scopeId","data-v-44bff880"]]);var g=b,v=o(4232);const y=e=>((0,a.Qi)("data-v-bfd19762"),e=e(),(0,a.jt)(),e),U={class:"login"},C=y((()=>(0,a.Lk)("h1",null,"Login",-1))),_=y((()=>(0,a.Lk)("button",{type:"submit"},"Login",-1))),w={key:0,class:"error"};function F(e,t,o,l,n,r){return(0,a.uX)(),(0,a.CE)("div",U,[C,(0,a.Lk)("form",{onSubmit:t[2]||(t[2]=(0,s.D$)(((...e)=>r.login&&r.login(...e)),["prevent"]))},[(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.email=e),type:"email",placeholder:"Email",required:""},null,512),[[s.Jo,n.email]]),(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.password=e),type:"password",placeholder:"Password",required:""},null,512),[[s.Jo,n.password]]),_],32),n.errorMessage?((0,a.uX)(),(0,a.CE)("p",w,(0,v.v_)(n.errorMessage),1)):(0,a.Q3)("",!0)])}var E=o(4373);const P="https://xammax.pythonanywhere.com/api/",S=E.A.create({baseURL:P,headers:{"Content-Type":"application/json"}});S.interceptors.request.use((e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers["Authorization"]=`Bearer ${t}`),e})),S.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(401===e.response.status&&!t._retry){t._retry=!0;const e=localStorage.getItem("refreshToken");if(e)try{const{data:o}=await E.A.post(`${P}token/refresh/`,{refresh:e});return localStorage.setItem("accessToken",o.access),t.headers["Authorization"]=`Bearer ${o.access}`,S(t)}catch(o){console.error("Refresh token failed",o),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),(void 0).$router.push("/login")}else localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),(void 0).$router.push("/login")}return Promise.reject(e)}));var A=S,I={name:"LoginPage",data(){return{email:"",password:"",errorMessage:""}},methods:{async login(){try{console.log("Sending login request with:",{email:this.email,password:this.password});const e=await A.post("login/",{email:this.email,password:this.password});console.log("Login successful:",e.data),localStorage.setItem("accessToken",e.data.access),localStorage.setItem("refreshToken",e.data.refresh),this.$router.push("/dashboard/")}catch(e){console.error("Login failed",e),e.response&&401===e.response.status?this.errorMessage="Invalid email or password.":this.errorMessage="An error occurred during login. Please try again."}}}};const X=(0,i.A)(I,[["render",F],["__scopeId","data-v-bfd19762"]]);var x=X;const T=e=>((0,a.Qi)("data-v-7bee589d"),e=e(),(0,a.jt)(),e),j={class:"register"},W=T((()=>(0,a.Lk)("h1",null,"Register",-1))),M={key:0};function J(e,t,o,s,l,n){const r=(0,a.g2)("user-form");return(0,a.uX)(),(0,a.CE)("div",j,[W,(0,a.bF)(r,{form:l.form,"show-extra-fields":!0,"submit-button-text":"Register",onSubmit:n.register},null,8,["form","onSubmit"]),l.error?((0,a.uX)(),(0,a.CE)("p",M,(0,v.v_)(l.error),1)):(0,a.Q3)("",!0)])}const Q=e=>((0,a.Qi)("data-v-1b66697a"),e=e(),(0,a.jt)(),e),V={class:"user-form"},$=Q((()=>(0,a.Lk)("label",{for:"username"},"Username:",-1))),D=Q((()=>(0,a.Lk)("label",{for:"email"},"Email:",-1))),O={key:0},q=Q((()=>(0,a.Lk)("label",{for:"password"},"Password:",-1))),N={key:1},B=Q((()=>(0,a.Lk)("label",{for:"confirm_password"},"Confirm Password:",-1))),R={type:"submit"};function K(e,t,o,l,n,r){return(0,a.uX)(),(0,a.CE)("div",V,[(0,a.Lk)("form",{onSubmit:t[4]||(t[4]=(0,s.D$)(((...e)=>r.handleSubmit&&r.handleSubmit(...e)),["prevent"]))},[(0,a.Lk)("div",null,[$,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.localForm.username=e),type:"text",id:"username",required:""},null,512),[[s.Jo,n.localForm.username]])]),(0,a.Lk)("div",null,[D,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.localForm.email=e),type:"email",id:"email",required:""},null,512),[[s.Jo,n.localForm.email]])]),r.showPasswordField?((0,a.uX)(),(0,a.CE)("div",O,[q,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.localForm.password=e),type:"password",id:"password",required:""},null,512),[[s.Jo,n.localForm.password]])])):(0,a.Q3)("",!0),r.showPasswordField?((0,a.uX)(),(0,a.CE)("div",N,[B,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.localForm.confirm_password=e),type:"password",id:"confirm_password",required:""},null,512),[[s.Jo,n.localForm.confirm_password]])])):(0,a.Q3)("",!0),(0,a.Lk)("button",R,(0,v.v_)(o.submitButtonText),1)],32)])}var H={props:{form:{type:Object,required:!0},showExtraFields:{type:Boolean,default:!0},submitButtonText:{type:String,default:"Submit"}},data(){return{localForm:JSON.parse(JSON.stringify(this.form))}},computed:{showPasswordField(){return this.showExtraFields}},methods:{handleSubmit(){console.log("Submitting form data:",this.localForm),this.$emit("submit",this.localForm)}}};const G=(0,i.A)(H,[["render",K],["__scopeId","data-v-1b66697a"]]);var z=G,Y={name:"UserRegister",components:{UserForm:z},data(){return{form:{username:"",email:"",password:"",confirm_password:""},error:null,isSubmitting:!1}},methods:{async register(e){if(this.isSubmitting)return;if(this.isSubmitting=!0,this.error&&(this.error=null),e.password!==e.confirm_password)return this.error="Passwords do not match",void(this.isSubmitting=!1);const t={username:e.username,email:e.email,password:e.password};console.log("Payload being sent:",t);try{const e=await A.post("register/",t,{headers:{"Content-Type":"application/json"}});console.log("Registration successful:",e.data),this.$router.push("login/")}catch(o){o.response&&o.response.data?(console.log("Error details:",o.response.data),this.error=o.response.data):this.error="Registration failed. Please try again."}finally{this.isSubmitting=!1}}}};const Z=(0,i.A)(Y,[["render",J],["__scopeId","data-v-7bee589d"]]);var ee=Z;const te=e=>((0,a.Qi)("data-v-01f47aca"),e=e(),(0,a.jt)(),e),oe={class:"user-page-container"},se={class:"profile-section"},ae=te((()=>(0,a.Lk)("strong",null,"Email:",-1))),le=te((()=>(0,a.Lk)("strong",null,"First Name:",-1))),ne=te((()=>(0,a.Lk)("strong",null,"Last Name:",-1))),re=te((()=>(0,a.Lk)("strong",null,"Phone:",-1))),ie=te((()=>(0,a.Lk)("strong",null,"Address:",-1))),ue=te((()=>(0,a.Lk)("strong",null,"Bio:",-1))),de=te((()=>(0,a.Lk)("strong",null,"Groups:",-1))),ce=te((()=>(0,a.Lk)("strong",null,"Permissions:",-1))),pe={key:0},me=te((()=>(0,a.Lk)("p",null,[(0,a.Lk)("strong",null,"Profile Photo:")],-1))),he=["src"];function ke(e,t,o,s,l,n){const r=(0,a.g2)("UserUpdate");return(0,a.uX)(),(0,a.CE)("div",oe,[(0,a.Lk)("h1",null,(0,v.v_)(l.user.username)+"'s Profile",1),(0,a.Lk)("div",se,[(0,a.Lk)("p",null,[ae,(0,a.eW)(" "+(0,v.v_)(l.user.email),1)]),(0,a.Lk)("p",null,[le,(0,a.eW)(" "+(0,v.v_)(l.user.first_name),1)]),(0,a.Lk)("p",null,[ne,(0,a.eW)(" "+(0,v.v_)(l.user.last_name),1)]),(0,a.Lk)("p",null,[re,(0,a.eW)(" "+(0,v.v_)(l.user.phone),1)]),(0,a.Lk)("p",null,[ie,(0,a.eW)(" "+(0,v.v_)(l.user.address),1)]),(0,a.Lk)("p",null,[ue,(0,a.eW)(" "+(0,v.v_)(l.user.bio),1)]),(0,a.Lk)("p",null,[de,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.user.groups,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e},(0,v.v_)(e),1)))),128))])]),(0,a.Lk)("p",null,[ce,(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.user.user_permissions,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e},(0,v.v_)(e),1)))),128))])]),l.user.photo?((0,a.uX)(),(0,a.CE)("div",pe,[me,(0,a.Lk)("img",{src:l.user.photo,alt:"Profile Photo",class:"profile-photo"},null,8,he)])):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openUpdateForm&&n.openUpdateForm(...e))},"Edit Profile"),l.showUpdateForm?((0,a.uX)(),(0,a.Wv)(r,{key:0,user:l.user,onClose:n.closeUpdateForm},null,8,["user","onClose"])):(0,a.Q3)("",!0)])}const fe=e=>((0,a.Qi)("data-v-4bc327ba"),e=e(),(0,a.jt)(),e),Le={class:"modal"},be={class:"modal-content"},ge=fe((()=>(0,a.Lk)("h2",null,"Edit Profile",-1))),ve={class:"form-group"},ye=fe((()=>(0,a.Lk)("label",{for:"username"},"Username:",-1))),Ue={class:"form-group"},Ce=fe((()=>(0,a.Lk)("label",{for:"email"},"Email:",-1))),_e={class:"form-group"},we=fe((()=>(0,a.Lk)("label",{for:"first_name"},"First Name:",-1))),Fe={class:"form-group"},Ee=fe((()=>(0,a.Lk)("label",{for:"last_name"},"Last Name:",-1))),Pe={class:"form-group"},Se=fe((()=>(0,a.Lk)("label",{for:"phone"},"Phone:",-1))),Ae={class:"form-group"},Ie=fe((()=>(0,a.Lk)("label",{for:"address"},"Address:",-1))),Xe={class:"form-group"},xe=fe((()=>(0,a.Lk)("label",{for:"bio"},"Bio:",-1))),Te={class:"form-group"},je=fe((()=>(0,a.Lk)("label",{for:"photo"},"Profile Photo:",-1))),We=["src"],Me={class:"button-group"},Je=fe((()=>(0,a.Lk)("button",{type:"submit",class:"btn-save"},"Save Changes",-1)));function Qe(e,t,o,l,n,r){return(0,a.uX)(),(0,a.CE)("div",Le,[(0,a.Lk)("div",be,[ge,(0,a.Lk)("form",{onSubmit:t[9]||(t[9]=(0,s.D$)(((...e)=>r.updateProfile&&r.updateProfile(...e)),["prevent"]))},[(0,a.Lk)("div",ve,[ye,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.localUser.username=e),id:"username",type:"text",disabled:""},null,512),[[s.Jo,n.localUser.username]])]),(0,a.Lk)("div",Ue,[Ce,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.localUser.email=e),id:"email",type:"email"},null,512),[[s.Jo,n.localUser.email]])]),(0,a.Lk)("div",_e,[we,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.localUser.first_name=e),id:"first_name",type:"text"},null,512),[[s.Jo,n.localUser.first_name]])]),(0,a.Lk)("div",Fe,[Ee,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.localUser.last_name=e),id:"last_name",type:"text"},null,512),[[s.Jo,n.localUser.last_name]])]),(0,a.Lk)("div",Pe,[Se,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.localUser.phone=e),id:"phone",type:"text"},null,512),[[s.Jo,n.localUser.phone]])]),(0,a.Lk)("div",Ae,[Ie,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>n.localUser.address=e),id:"address",type:"text"},null,512),[[s.Jo,n.localUser.address]])]),(0,a.Lk)("div",Xe,[xe,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>n.localUser.bio=e),id:"bio"},null,512),[[s.Jo,n.localUser.bio]])]),(0,a.Lk)("div",Te,[je,(0,a.Lk)("input",{type:"file",onChange:t[7]||(t[7]=(...e)=>r.onPhotoChange&&r.onPhotoChange(...e)),id:"photo"},null,32),n.photoPreview?((0,a.uX)(),(0,a.CE)("img",{key:0,src:n.photoPreview,alt:"Profile Photo",class:"profile-photo-preview"},null,8,We)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",Me,[Je,(0,a.Lk)("button",{type:"button",class:"btn-cancel",onClick:t[8]||(t[8]=(...e)=>r.closeForm&&r.closeForm(...e))},"Cancel")])],32)])])}o(4603),o(7566),o(8721);var Ve={name:"UserUpdate",props:{user:{type:Object,required:!0}},data(){return{localUser:{...this.user},photoPreview:this.user.photo,newPhotoFile:null}},methods:{onPhotoChange(e){const t=e.target.files[0];t&&(this.newPhotoFile=t,this.photoPreview=URL.createObjectURL(t))},async updateProfile(){try{const e=new FormData;e.append("username",this.localUser.username),e.append("email",this.localUser.email),e.append("first_name",this.localUser.first_name),e.append("last_name",this.localUser.last_name),e.append("phone",this.localUser.phone),e.append("address",this.localUser.address),e.append("bio",this.localUser.bio),this.newPhotoFile&&e.append("photo",this.newPhotoFile);const t=await A.put("/profile/",e,{headers:{"Content-Type":"multipart/form-data"}});this.$emit("close",t.data),alert("Profile updated successfully!")}catch(e){console.error("Failed to update profile",e),alert("Failed to update profile. Please try again.")}},closeForm(){this.$emit("close")}}};const $e=(0,i.A)(Ve,[["render",Qe],["__scopeId","data-v-4bc327ba"]]);var De=$e,Oe={name:"UserPage",components:{UserUpdate:De},data(){return{user:{},showUpdateForm:!1}},async created(){try{const e=await A.get("profile");this.user=e.data}catch(e){console.error("Failed to load user profile",e)}},methods:{openUpdateForm(){this.showUpdateForm=!0},closeUpdateForm(e){this.showUpdateForm=!1,e&&(this.user=e)}}};const qe=(0,i.A)(Oe,[["render",ke],["__scopeId","data-v-01f47aca"]]);var Ne=qe;const Be={class:"dashboard-container"};function Re(e,t,o,s,l,n){const r=(0,a.g2)("UserList"),i=(0,a.g2)("ConsultationList");return(0,a.uX)(),(0,a.CE)("div",Be,[(0,a.Lk)("h1",null,(0,v.v_)(e.username)+" Dashboard",1),(0,a.bF)(r),(0,a.bF)(i)])}const Ke=e=>((0,a.Qi)("data-v-2a8af02c"),e=e(),(0,a.jt)(),e),He=Ke((()=>(0,a.Lk)("h2",null,"All Users",-1))),Ge=Ke((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"Email"),(0,a.Lk)("th",null,"Username"),(0,a.Lk)("th",null,"First Name"),(0,a.Lk)("th",null,"Last Name"),(0,a.Lk)("th",null,"Phone"),(0,a.Lk)("th",null,"Address"),(0,a.Lk)("th",null,"Bio"),(0,a.Lk)("th",null,"Photo"),(0,a.Lk)("th",null,"Doctor"),(0,a.Lk)("th",null,"User"),(0,a.Lk)("th",null,"Groups"),(0,a.Lk)("th",null,"Actions")])],-1))),ze=["src"],Ye=["onClick"],Ze=["onClick"],et={key:0,class:"modal"},tt={class:"modal-content"},ot=Ke((()=>(0,a.Lk)("h3",null,"Edit User",-1))),st=Ke((()=>(0,a.Lk)("label",{for:"edit-username"},"Username:",-1))),at=Ke((()=>(0,a.Lk)("label",{for:"edit-email"},"Email:",-1))),lt=Ke((()=>(0,a.Lk)("label",{for:"edit-groups"},"Groups:",-1))),nt=Ke((()=>(0,a.Lk)("label",{for:"edit-is-doctor"},"Is Doctor:",-1))),rt=Ke((()=>(0,a.Lk)("label",{for:"edit-is-user"},"Is User:",-1))),it=Ke((()=>(0,a.Lk)("label",{for:"edit-photo"},"Update Photo:",-1))),ut={class:"modal-buttons"};function dt(e,t,o,l,n,r){return(0,a.uX)(),(0,a.CE)("div",null,[He,(0,a.Lk)("table",null,[Ge,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(n.users,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,v.v_)(e.id),1),(0,a.Lk)("td",null,(0,v.v_)(e.email),1),(0,a.Lk)("td",null,(0,v.v_)(e.username),1),(0,a.Lk)("td",null,(0,v.v_)(e.first_name),1),(0,a.Lk)("td",null,(0,v.v_)(e.last_name),1),(0,a.Lk)("td",null,(0,v.v_)(e.phone),1),(0,a.Lk)("td",null,(0,v.v_)(e.address),1),(0,a.Lk)("td",null,(0,v.v_)(e.bio),1),(0,a.Lk)("td",null,[(0,a.Lk)("img",{src:e.photo,alt:"User Photo",class:"user-photo"},null,8,ze)]),(0,a.Lk)("td",null,(0,v.v_)(e.is_doctor?"Yes":"No"),1),(0,a.Lk)("td",null,(0,v.v_)(e.is_user?"Yes":"No"),1),(0,a.Lk)("td",null,[(0,a.Lk)("ul",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.groups,(e=>((0,a.uX)(),(0,a.CE)("li",{key:e},(0,v.v_)(e),1)))),128))])]),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:t=>r.editUser(e)},"Edit",8,Ye),(0,a.Lk)("button",{onClick:t=>r.deleteUser(e.id)},"Delete",8,Ze)])])))),128))])]),n.showEditModal?((0,a.uX)(),(0,a.CE)("div",et,[(0,a.Lk)("div",tt,[ot,st,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.editedUser.username=e),id:"edit-username",type:"text"},null,512),[[s.Jo,n.editedUser.username]]),at,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.editedUser.email=e),id:"edit-email",type:"email"},null,512),[[s.Jo,n.editedUser.email]]),lt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.editedUser.groups=e),id:"edit-groups",type:"text",placeholder:"Enter comma-separated groups"},null,512),[[s.Jo,n.editedUser.groups]]),nt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.editedUser.is_doctor=e),id:"edit-is-doctor",type:"checkbox"},null,512),[[s.lH,n.editedUser.is_doctor]]),rt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.editedUser.is_user=e),id:"edit-is-user",type:"checkbox"},null,512),[[s.lH,n.editedUser.is_user]]),it,(0,a.Lk)("input",{type:"file",onChange:t[5]||(t[5]=(...e)=>r.onPhotoChange&&r.onPhotoChange(...e))},null,32),(0,a.Lk)("div",ut,[(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>r.saveEditedUser&&r.saveEditedUser(...e))},"Save"),(0,a.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>r.closeEditModal&&r.closeEditModal(...e)),class:"cancel-button"},"Cancel")])])])):(0,a.Q3)("",!0)])}var ct={data(){return{users:[],showEditModal:!1,editedUser:{},newPhotoFile:null}},async created(){await this.fetchUsers()},methods:{async fetchUsers(){try{const e=await A.get("/users/");this.users=e.data}catch(e){console.error("Failed to load users",e)}},editUser(e){this.editedUser={...e},this.showEditModal=!0},async saveEditedUser(){try{if(!this.editedUser.id)return void console.error("No user ID found");const e=new FormData;e.append("username",this.editedUser.username),e.append("email",this.editedUser.email),e.append("first_name",this.editedUser.first_name),e.append("last_name",this.editedUser.last_name),e.append("phone",this.editedUser.phone),e.append("address",this.editedUser.address),e.append("bio",this.editedUser.bio),e.append("is_doctor",this.editedUser.is_doctor),e.append("is_user",this.editedUser.is_user),e.append("groups",this.editedUser.groups.join(",")),this.newPhotoFile&&e.append("photo",this.newPhotoFile);const t=await A.put(`/users/${this.editedUser.id}/`,e,{headers:{"Content-Type":"multipart/form-data"}});console.log("User updated:",t.data),alert("User updated successfully!"),this.closeEditModal(),await this.fetchUsers()}catch(e){console.error("Failed to update user",e.response?e.response.data:e.message)}},onPhotoChange(e){const t=e.target.files[0];t&&(this.newPhotoFile=t)},closeEditModal(){this.showEditModal=!1,this.newPhotoFile=null},async deleteUser(e){try{const t=confirm("Are you sure you want to delete this user?");t&&(await A.delete(`/users/${e}/`),this.users=this.users.filter((t=>t.id!==e)),alert("User deleted successfully!"))}catch(t){console.error("Failed to delete user",t)}}}};const pt=(0,i.A)(ct,[["render",dt],["__scopeId","data-v-2a8af02c"]]);var mt=pt;const ht=e=>((0,a.Qi)("data-v-6740106e"),e=e(),(0,a.jt)(),e),kt=ht((()=>(0,a.Lk)("h2",null,"All Consultations",-1))),ft=ht((()=>(0,a.Lk)("thead",null,[(0,a.Lk)("tr",null,[(0,a.Lk)("th",null,"ID"),(0,a.Lk)("th",null,"Doctor"),(0,a.Lk)("th",null,"Patient"),(0,a.Lk)("th",null,"Date"),(0,a.Lk)("th",null,"Time"),(0,a.Lk)("th",null,"Notes"),(0,a.Lk)("th",null,"Actions")])],-1))),Lt=["onClick"],bt=["onClick"],gt={key:0,class:"modal"},vt={class:"modal-content"};function yt(e,t,o,s,l,n){const r=(0,a.g2)("ConsultationForm");return(0,a.uX)(),(0,a.CE)("div",null,[kt,(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>n.openCreateForm&&n.openCreateForm(...e))},"Create New Consultation"),(0,a.Lk)("table",null,[ft,(0,a.Lk)("tbody",null,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.consultations,(e=>((0,a.uX)(),(0,a.CE)("tr",{key:e.id},[(0,a.Lk)("td",null,(0,v.v_)(e.id),1),(0,a.Lk)("td",null,(0,v.v_)(e.doctor),1),(0,a.Lk)("td",null,(0,v.v_)(e.patient),1),(0,a.Lk)("td",null,(0,v.v_)(e.date),1),(0,a.Lk)("td",null,(0,v.v_)(e.time),1),(0,a.Lk)("td",null,(0,v.v_)(e.notes),1),(0,a.Lk)("td",null,[(0,a.Lk)("button",{onClick:t=>n.editConsultation(e)},"Edit",8,Lt),(0,a.Lk)("button",{onClick:t=>n.deleteConsultation(e.id)},"Delete",8,bt)])])))),128))])]),l.showFormModal?((0,a.uX)(),(0,a.CE)("div",gt,[(0,a.Lk)("div",vt,[(0,a.Lk)("h3",null,(0,v.v_)(l.isEditing?"Edit Consultation":"Create Consultation"),1),(0,a.bF)(r,{consultation:l.currentConsultation,submitButtonText:l.isEditing?"Save Changes":"Create Consultation",onSubmit:n.handleFormSubmit},null,8,["consultation","submitButtonText","onSubmit"]),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>n.closeFormModal&&n.closeFormModal(...e)),class:"cancel-button"},"Cancel")])])):(0,a.Q3)("",!0)])}const Ut=e=>((0,a.Qi)("data-v-9eaa15e0"),e=e(),(0,a.jt)(),e),Ct={class:"consultation-form"},_t=Ut((()=>(0,a.Lk)("label",{for:"doctor"},"Doctor:",-1))),wt=Ut((()=>(0,a.Lk)("label",{for:"patient"},"Patient:",-1))),Ft=Ut((()=>(0,a.Lk)("label",{for:"date"},"Date:",-1))),Et=Ut((()=>(0,a.Lk)("label",{for:"time"},"Time:",-1))),Pt=Ut((()=>(0,a.Lk)("label",{for:"notes"},"Notes:",-1))),St={type:"submit"};function At(e,t,o,l,n,r){return(0,a.uX)(),(0,a.CE)("div",Ct,[(0,a.Lk)("form",{onSubmit:t[5]||(t[5]=(0,s.D$)(((...e)=>r.handleSubmit&&r.handleSubmit(...e)),["prevent"]))},[(0,a.Lk)("div",null,[_t,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>n.localConsultation.doctor=e),id:"doctor",type:"text"},null,512),[[s.Jo,n.localConsultation.doctor]])]),(0,a.Lk)("div",null,[wt,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>n.localConsultation.patient=e),id:"patient",type:"text"},null,512),[[s.Jo,n.localConsultation.patient]])]),(0,a.Lk)("div",null,[Ft,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>n.localConsultation.date=e),id:"date",type:"date"},null,512),[[s.Jo,n.localConsultation.date]])]),(0,a.Lk)("div",null,[Et,(0,a.bo)((0,a.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>n.localConsultation.time=e),id:"time",type:"time"},null,512),[[s.Jo,n.localConsultation.time]])]),(0,a.Lk)("div",null,[Pt,(0,a.bo)((0,a.Lk)("textarea",{"onUpdate:modelValue":t[4]||(t[4]=e=>n.localConsultation.notes=e),id:"notes"},null,512),[[s.Jo,n.localConsultation.notes]])]),(0,a.Lk)("button",St,(0,v.v_)(o.submitButtonText),1)],32)])}var It={props:{consultation:{type:Object,required:!0},submitButtonText:{type:String,default:"Save"}},data(){return{localConsultation:{...this.consultation}}},methods:{handleSubmit(){this.$emit("submit",this.localConsultation)}}};const Xt=(0,i.A)(It,[["render",At],["__scopeId","data-v-9eaa15e0"]]);var xt=Xt,Tt={components:{ConsultationForm:xt},data(){return{consultations:[],showFormModal:!1,currentConsultation:{},isEditing:!1}},async created(){await this.fetchConsultations()},methods:{async fetchConsultations(){try{const e=await A.get("/consultations/");this.consultations=e.data}catch(e){console.error("Failed to load consultations",e)}},openCreateForm(){this.currentConsultation={doctor:"",patient:"",date:"",time:"",notes:""},this.isEditing=!1,this.showFormModal=!0},editConsultation(e){this.currentConsultation={...e},this.isEditing=!0,this.showFormModal=!0},async handleFormSubmit(e){try{this.isEditing?(await A.put(`/consultations/${e.id}/`,e),alert("Consultation updated successfully!")):(await A.post("/consultations/",e),alert("Consultation created successfully!")),this.closeFormModal(),await this.fetchConsultations()}catch(t){console.error("Failed to save consultation",t.response?t.response.data:t.message)}},async deleteConsultation(e){try{const t=confirm("Are you sure you want to delete this consultation?");t&&(await A.delete(`/consultations/${e}/`),this.consultations=this.consultations.filter((t=>t.id!==e)),alert("Consultation deleted successfully!"))}catch(t){console.error("Failed to delete consultation",t)}},closeFormModal(){this.showFormModal=!1}}};const jt=(0,i.A)(Tt,[["render",yt],["__scopeId","data-v-6740106e"]]);var Wt=jt,Mt={name:"DashboardPage",components:{UserList:mt,ConsultationList:Wt}};const Jt=(0,i.A)(Mt,[["render",Re],["__scopeId","data-v-ace84fe0"]]);var Qt=Jt;const Vt=[{path:"/",name:"home",component:g},{path:"/login",name:"login",component:x},{path:"/register",name:"register",component:ee},{path:"/profile",name:"profile",component:Ne,meta:{requiresAuth:!0}},{path:"/dashboard",name:"dashboard",component:Qt,meta:{requiresAuth:!0}}],$t=(0,c.aE)({history:(0,c.LA)(),routes:Vt});$t.beforeEach(((e,t,o)=>{const s=e.matched.some((e=>e.meta.requiresAuth)),a=!!localStorage.getItem("accessToken");s&&!a?o("/login"):o()}));var Dt=$t;const Ot=(0,s.Ef)(d);Ot.use(Dt),Ot.mount("#app")}},t={};function o(s){var a=t[s];if(void 0!==a)return a.exports;var l=t[s]={exports:{}};return e[s].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,s,a,l){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],a=e[d][1],l=e[d][2];for(var r=!0,i=0;i<s.length;i++)(!1&l||n>=l)&&Object.keys(o.O).every((function(e){return o.O[e](s[i])}))?s.splice(i--,1):(r=!1,l<n&&(n=l));if(r){e.splice(d--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var d=e.length;d>0&&e[d-1][2]>l;d--)e[d]=e[d-1];e[d]=[s,a,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var a,l,n=s[0],r=s[1],i=s[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(i)var d=i(o)}for(t&&t(s);u<n.length;u++)l=n[u],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(d)},s=self["webpackChunkmedical_project"]=self["webpackChunkmedical_project"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(2700)}));s=o.O(s)})();
//# sourceMappingURL=app.ba4e1bdf.js.map