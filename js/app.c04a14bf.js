(function(){"use strict";var e={4384:function(e,t,o){var r=o(5130),s=o(6768);const a={id:"app"};function l(e,t,o,r,l,n){const i=(0,s.g2)("router-link"),d=(0,s.g2)("router-view");return(0,s.uX)(),(0,s.CE)("div",a,[(0,s.Lk)("header",null,[(0,s.Lk)("nav",null,[(0,s.bF)(i,{to:"/"},{default:(0,s.k6)((()=>[(0,s.eW)("Home")])),_:1}),(0,s.eW)(" | "),l.isAuthenticated?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(i,{key:0,to:"/login"},{default:(0,s.k6)((()=>[(0,s.eW)("Login")])),_:1})),(0,s.eW)(" | "),l.isAuthenticated?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(i,{key:1,to:"/register"},{default:(0,s.k6)((()=>[(0,s.eW)("Register")])),_:1})),(0,s.eW)(" | "),l.isAuthenticated?((0,s.uX)(),(0,s.Wv)(i,{key:2,to:"/profile"},{default:(0,s.k6)((()=>[(0,s.eW)("Profile")])),_:1})):(0,s.Q3)("",!0),(0,s.eW)(" | "),l.isAuthenticated?((0,s.uX)(),(0,s.Wv)(i,{key:3,to:"/dashboard"},{default:(0,s.k6)((()=>[(0,s.eW)("Dashboard")])),_:1})):(0,s.Q3)("",!0),(0,s.eW)(" | "),l.isAuthenticated?((0,s.uX)(),(0,s.CE)("button",{key:4,onClick:t[0]||(t[0]=(...e)=>n.logout&&n.logout(...e))},"Logout")):(0,s.Q3)("",!0)])]),(0,s.Lk)("main",null,[(0,s.bF)(d)])])}o(4114);var n={name:"App",data(){return{isAuthenticated:!!localStorage.getItem("accessToken")}},methods:{logout(){localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this.isAuthenticated=!1,this.$router.push("/login")},checkAuthStatus(){this.isAuthenticated=!!localStorage.getItem("accessToken")}},created(){this.checkAuthStatus(),this.$router.beforeEach(((e,t,o)=>{this.checkAuthStatus(),o()}))}},i=o(1241);const d=(0,i.A)(n,[["render",l]]);var u=d,c=o(1387);const p=e=>((0,s.Qi)("data-v-44bff880"),e=e(),(0,s.jt)(),e),m={class:"home"},h=p((()=>(0,s.Lk)("h1",null,"Welcome to Consultation App",-1))),f=p((()=>(0,s.Lk)("p",null,"This is the home page of our application.",-1)));function k(e,t,o,r,a,l){const n=(0,s.g2)("router-link");return(0,s.uX)(),(0,s.CE)("div",m,[h,f,(0,s.Lk)("div",null,[(0,s.bF)(n,{to:"/login"},{default:(0,s.k6)((()=>[(0,s.eW)("Login")])),_:1}),(0,s.eW)(" | "),(0,s.bF)(n,{to:"/register"},{default:(0,s.k6)((()=>[(0,s.eW)("Register")])),_:1})])])}var g={name:"HomePage",data(){return{message:"Welcome to Consultation App"}}};const L=(0,i.A)(g,[["render",k],["__scopeId","data-v-44bff880"]]);var b=L,v=o(4232);const U=e=>((0,s.Qi)("data-v-bfd19762"),e=e(),(0,s.jt)(),e),y={class:"login"},_=U((()=>(0,s.Lk)("h1",null,"Login",-1))),w=U((()=>(0,s.Lk)("button",{type:"submit"},"Login",-1))),P={key:0,class:"error"};function F(e,t,o,a,l,n){return(0,s.uX)(),(0,s.CE)("div",y,[_,(0,s.Lk)("form",{onSubmit:t[2]||(t[2]=(0,r.D$)(((...e)=>n.login&&n.login(...e)),["prevent"]))},[(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.email=e),type:"email",placeholder:"Email",required:""},null,512),[[r.Jo,l.email]]),(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.password=e),type:"password",placeholder:"Password",required:""},null,512),[[r.Jo,l.password]]),w],32),l.errorMessage?((0,s.uX)(),(0,s.CE)("p",P,(0,v.v_)(l.errorMessage),1)):(0,s.Q3)("",!0)])}var C=o(4373);const E="https://xammax.pythonanywhere.com/api/",S=C.A.create({baseURL:E,headers:{"Content-Type":"application/json"}});S.interceptors.request.use((e=>{const t=localStorage.getItem("accessToken");return t&&(e.headers["Authorization"]=`Bearer ${t}`),e})),S.interceptors.response.use((e=>e),(async e=>{const t=e.config;if(401===e.response.status&&!t._retry){t._retry=!0;const e=localStorage.getItem("refreshToken");if(e)try{const{data:o}=await C.A.post(`${E}token/refresh/`,{refresh:e});return localStorage.setItem("accessToken",o.access),t.headers["Authorization"]=`Bearer ${o.access}`,S(t)}catch(o){console.error("Refresh token failed",o),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),(void 0).$router.push("/login")}else localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),(void 0).$router.push("/login")}return Promise.reject(e)}));var A=S,I={name:"LoginPage",data(){return{email:"",password:"",errorMessage:""}},methods:{async login(){try{console.log("Sending login request with:",{email:this.email,password:this.password});const e=await A.post("login/",{email:this.email,password:this.password});console.log("Login successful:",e.data),localStorage.setItem("accessToken",e.data.access),localStorage.setItem("refreshToken",e.data.refresh),this.$router.push("/dashboard/")}catch(e){console.error("Login failed",e),e.response&&401===e.response.status?this.errorMessage="Invalid email or password.":this.errorMessage="An error occurred during login. Please try again."}}}};const X=(0,i.A)(I,[["render",F],["__scopeId","data-v-bfd19762"]]);var W=X;const T=e=>((0,s.Qi)("data-v-7bee589d"),e=e(),(0,s.jt)(),e),j={class:"register"},x=T((()=>(0,s.Lk)("h1",null,"Register",-1))),Q={key:0};function J(e,t,o,r,a,l){const n=(0,s.g2)("user-form");return(0,s.uX)(),(0,s.CE)("div",j,[x,(0,s.bF)(n,{form:a.form,"show-extra-fields":!0,"submit-button-text":"Register",onSubmit:l.register},null,8,["form","onSubmit"]),a.error?((0,s.uX)(),(0,s.CE)("p",Q,(0,v.v_)(a.error),1)):(0,s.Q3)("",!0)])}const O=e=>((0,s.Qi)("data-v-1b66697a"),e=e(),(0,s.jt)(),e),V={class:"user-form"},$=O((()=>(0,s.Lk)("label",{for:"username"},"Username:",-1))),M=O((()=>(0,s.Lk)("label",{for:"email"},"Email:",-1))),q={key:0},D=O((()=>(0,s.Lk)("label",{for:"password"},"Password:",-1))),N={key:1},R=O((()=>(0,s.Lk)("label",{for:"confirm_password"},"Confirm Password:",-1))),B={type:"submit"};function H(e,t,o,a,l,n){return(0,s.uX)(),(0,s.CE)("div",V,[(0,s.Lk)("form",{onSubmit:t[4]||(t[4]=(0,r.D$)(((...e)=>n.handleSubmit&&n.handleSubmit(...e)),["prevent"]))},[(0,s.Lk)("div",null,[$,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.localForm.username=e),type:"text",id:"username",required:""},null,512),[[r.Jo,l.localForm.username]])]),(0,s.Lk)("div",null,[M,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.localForm.email=e),type:"email",id:"email",required:""},null,512),[[r.Jo,l.localForm.email]])]),n.showPasswordField?((0,s.uX)(),(0,s.CE)("div",q,[D,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.localForm.password=e),type:"password",id:"password",required:""},null,512),[[r.Jo,l.localForm.password]])])):(0,s.Q3)("",!0),n.showPasswordField?((0,s.uX)(),(0,s.CE)("div",N,[R,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.localForm.confirm_password=e),type:"password",id:"confirm_password",required:""},null,512),[[r.Jo,l.localForm.confirm_password]])])):(0,s.Q3)("",!0),(0,s.Lk)("button",B,(0,v.v_)(o.submitButtonText),1)],32)])}var K={props:{form:{type:Object,required:!0},showExtraFields:{type:Boolean,default:!0},submitButtonText:{type:String,default:"Submit"}},data(){return{localForm:JSON.parse(JSON.stringify(this.form))}},computed:{showPasswordField(){return this.showExtraFields}},methods:{handleSubmit(){console.log("Submitting form data:",this.localForm),this.$emit("submit",this.localForm)}}};const G=(0,i.A)(K,[["render",H],["__scopeId","data-v-1b66697a"]]);var z=G,Y={name:"UserRegister",components:{UserForm:z},data(){return{form:{username:"",email:"",password:"",confirm_password:""},error:null,isSubmitting:!1}},methods:{async register(e){if(this.isSubmitting)return;if(this.isSubmitting=!0,this.error&&(this.error=null),e.password!==e.confirm_password)return this.error="Passwords do not match",void(this.isSubmitting=!1);const t={username:e.username,email:e.email,password:e.password};console.log("Payload being sent:",t);try{const e=await A.post("register/",t,{headers:{"Content-Type":"application/json"}});console.log("Registration successful:",e.data),this.$router.push("login/")}catch(o){o.response&&o.response.data?(console.log("Error details:",o.response.data),this.error=o.response.data):this.error="Registration failed. Please try again."}finally{this.isSubmitting=!1}}}};const Z=(0,i.A)(Y,[["render",J],["__scopeId","data-v-7bee589d"]]);var ee=Z;const te=e=>((0,s.Qi)("data-v-43cde522"),e=e(),(0,s.jt)(),e),oe={class:"user-page-container"},re={class:"profile-section"},se=te((()=>(0,s.Lk)("strong",null,"Email:",-1))),ae=te((()=>(0,s.Lk)("strong",null,"First Name:",-1))),le=te((()=>(0,s.Lk)("strong",null,"Last Name:",-1))),ne=te((()=>(0,s.Lk)("strong",null,"Phone:",-1))),ie=te((()=>(0,s.Lk)("strong",null,"Address:",-1))),de=te((()=>(0,s.Lk)("strong",null,"Bio:",-1))),ue=te((()=>(0,s.Lk)("strong",null,"Groups:",-1))),ce=te((()=>(0,s.Lk)("strong",null,"Permissions:",-1))),pe={key:0},me=te((()=>(0,s.Lk)("p",null,[(0,s.Lk)("strong",null,"Profile Photo:")],-1))),he=["src"];function fe(e,t,o,r,a,l){const n=(0,s.g2)("UserUpdate");return(0,s.uX)(),(0,s.CE)("div",oe,[(0,s.Lk)("h1",null,(0,v.v_)(a.user.username)+"'s Profile",1),(0,s.Lk)("div",re,[(0,s.Lk)("p",null,[se,(0,s.eW)(" "+(0,v.v_)(a.user.email),1)]),(0,s.Lk)("p",null,[ae,(0,s.eW)(" "+(0,v.v_)(a.user.first_name),1)]),(0,s.Lk)("p",null,[le,(0,s.eW)(" "+(0,v.v_)(a.user.last_name),1)]),(0,s.Lk)("p",null,[ne,(0,s.eW)(" "+(0,v.v_)(a.user.phone),1)]),(0,s.Lk)("p",null,[ie,(0,s.eW)(" "+(0,v.v_)(a.user.address),1)]),(0,s.Lk)("p",null,[de,(0,s.eW)(" "+(0,v.v_)(a.user.bio),1)]),(0,s.Lk)("p",null,[ue,(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.user.groups,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,v.v_)(e),1)))),128))])]),(0,s.Lk)("p",null,[ce,(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(a.user.user_permissions,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,v.v_)(e),1)))),128))])]),a.user.photo?((0,s.uX)(),(0,s.CE)("div",pe,[me,(0,s.Lk)("img",{src:a.user.photo,alt:"Profile Photo",class:"profile-photo"},null,8,he)])):(0,s.Q3)("",!0)]),(0,s.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.openUpdateForm&&l.openUpdateForm(...e))},"Edit Profile"),a.showUpdateForm?((0,s.uX)(),(0,s.Wv)(n,{key:0,user:a.user,onClose:l.closeUpdateForm},null,8,["user","onClose"])):(0,s.Q3)("",!0)])}const ke=e=>((0,s.Qi)("data-v-4bc327ba"),e=e(),(0,s.jt)(),e),ge={class:"modal"},Le={class:"modal-content"},be=ke((()=>(0,s.Lk)("h2",null,"Edit Profile",-1))),ve={class:"form-group"},Ue=ke((()=>(0,s.Lk)("label",{for:"username"},"Username:",-1))),ye={class:"form-group"},_e=ke((()=>(0,s.Lk)("label",{for:"email"},"Email:",-1))),we={class:"form-group"},Pe=ke((()=>(0,s.Lk)("label",{for:"first_name"},"First Name:",-1))),Fe={class:"form-group"},Ce=ke((()=>(0,s.Lk)("label",{for:"last_name"},"Last Name:",-1))),Ee={class:"form-group"},Se=ke((()=>(0,s.Lk)("label",{for:"phone"},"Phone:",-1))),Ae={class:"form-group"},Ie=ke((()=>(0,s.Lk)("label",{for:"address"},"Address:",-1))),Xe={class:"form-group"},We=ke((()=>(0,s.Lk)("label",{for:"bio"},"Bio:",-1))),Te={class:"form-group"},je=ke((()=>(0,s.Lk)("label",{for:"photo"},"Profile Photo:",-1))),xe=["src"],Qe={class:"button-group"},Je=ke((()=>(0,s.Lk)("button",{type:"submit",class:"btn-save"},"Save Changes",-1)));function Oe(e,t,o,a,l,n){return(0,s.uX)(),(0,s.CE)("div",ge,[(0,s.Lk)("div",Le,[be,(0,s.Lk)("form",{onSubmit:t[9]||(t[9]=(0,r.D$)(((...e)=>n.updateProfile&&n.updateProfile(...e)),["prevent"]))},[(0,s.Lk)("div",ve,[Ue,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.localUser.username=e),id:"username",type:"text",disabled:""},null,512),[[r.Jo,l.localUser.username]])]),(0,s.Lk)("div",ye,[_e,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.localUser.email=e),id:"email",type:"email"},null,512),[[r.Jo,l.localUser.email]])]),(0,s.Lk)("div",we,[Pe,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.localUser.first_name=e),id:"first_name",type:"text"},null,512),[[r.Jo,l.localUser.first_name]])]),(0,s.Lk)("div",Fe,[Ce,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.localUser.last_name=e),id:"last_name",type:"text"},null,512),[[r.Jo,l.localUser.last_name]])]),(0,s.Lk)("div",Ee,[Se,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.localUser.phone=e),id:"phone",type:"text"},null,512),[[r.Jo,l.localUser.phone]])]),(0,s.Lk)("div",Ae,[Ie,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[5]||(t[5]=e=>l.localUser.address=e),id:"address",type:"text"},null,512),[[r.Jo,l.localUser.address]])]),(0,s.Lk)("div",Xe,[We,(0,s.bo)((0,s.Lk)("textarea",{"onUpdate:modelValue":t[6]||(t[6]=e=>l.localUser.bio=e),id:"bio"},null,512),[[r.Jo,l.localUser.bio]])]),(0,s.Lk)("div",Te,[je,(0,s.Lk)("input",{type:"file",onChange:t[7]||(t[7]=(...e)=>n.onPhotoChange&&n.onPhotoChange(...e)),id:"photo"},null,32),l.photoPreview?((0,s.uX)(),(0,s.CE)("img",{key:0,src:l.photoPreview,alt:"Profile Photo",class:"profile-photo-preview"},null,8,xe)):(0,s.Q3)("",!0)]),(0,s.Lk)("div",Qe,[Je,(0,s.Lk)("button",{type:"button",class:"btn-cancel",onClick:t[8]||(t[8]=(...e)=>n.closeForm&&n.closeForm(...e))},"Cancel")])],32)])])}o(4603),o(7566),o(8721);var Ve={name:"UserUpdate",props:{user:{type:Object,required:!0}},data(){return{localUser:{...this.user},photoPreview:this.user.photo,newPhotoFile:null}},methods:{onPhotoChange(e){const t=e.target.files[0];t&&(this.newPhotoFile=t,this.photoPreview=URL.createObjectURL(t))},async updateProfile(){try{const e=new FormData;e.append("username",this.localUser.username),e.append("email",this.localUser.email),e.append("first_name",this.localUser.first_name),e.append("last_name",this.localUser.last_name),e.append("phone",this.localUser.phone),e.append("address",this.localUser.address),e.append("bio",this.localUser.bio),this.newPhotoFile&&e.append("photo",this.newPhotoFile);const t=await A.put("/profile/",e,{headers:{"Content-Type":"multipart/form-data"}});this.$emit("close",t.data),alert("Profile updated successfully!")}catch(e){console.error("Failed to update profile",e),alert("Failed to update profile. Please try again.")}},closeForm(){this.$emit("close")}}};const $e=(0,i.A)(Ve,[["render",Oe],["__scopeId","data-v-4bc327ba"]]);var Me=$e,qe={name:"UserPage",components:{UserUpdate:Me},data(){return{user:{},showUpdateForm:!1}},async created(){try{const e=await A.get("/profile/");this.user=e.data}catch(e){console.error("Failed to load user profile",e)}},methods:{openUpdateForm(){this.showUpdateForm=!0},closeUpdateForm(e){this.showUpdateForm=!1,e&&(this.user=e)}}};const De=(0,i.A)(qe,[["render",fe],["__scopeId","data-v-43cde522"]]);var Ne=De;const Re={class:"dashboard-container"};function Be(e,t,o,r,a,l){const n=(0,s.g2)("UserList");return(0,s.uX)(),(0,s.CE)("div",Re,[(0,s.Lk)("h1",null,(0,v.v_)(a.username)+" Dashboard",1),(0,s.bF)(n)])}const He=e=>((0,s.Qi)("data-v-2a8af02c"),e=e(),(0,s.jt)(),e),Ke=He((()=>(0,s.Lk)("h2",null,"All Users",-1))),Ge=He((()=>(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",null,"ID"),(0,s.Lk)("th",null,"Email"),(0,s.Lk)("th",null,"Username"),(0,s.Lk)("th",null,"First Name"),(0,s.Lk)("th",null,"Last Name"),(0,s.Lk)("th",null,"Phone"),(0,s.Lk)("th",null,"Address"),(0,s.Lk)("th",null,"Bio"),(0,s.Lk)("th",null,"Photo"),(0,s.Lk)("th",null,"Doctor"),(0,s.Lk)("th",null,"User"),(0,s.Lk)("th",null,"Groups"),(0,s.Lk)("th",null,"Actions")])],-1))),ze=["src"],Ye=["onClick"],Ze=["onClick"],et={key:0,class:"modal"},tt={class:"modal-content"},ot=He((()=>(0,s.Lk)("h3",null,"Edit User",-1))),rt=He((()=>(0,s.Lk)("label",{for:"edit-username"},"Username:",-1))),st=He((()=>(0,s.Lk)("label",{for:"edit-email"},"Email:",-1))),at=He((()=>(0,s.Lk)("label",{for:"edit-groups"},"Groups:",-1))),lt=He((()=>(0,s.Lk)("label",{for:"edit-is-doctor"},"Is Doctor:",-1))),nt=He((()=>(0,s.Lk)("label",{for:"edit-is-user"},"Is User:",-1))),it=He((()=>(0,s.Lk)("label",{for:"edit-photo"},"Update Photo:",-1))),dt={class:"modal-buttons"};function ut(e,t,o,a,l,n){return(0,s.uX)(),(0,s.CE)("div",null,[Ke,(0,s.Lk)("table",null,[Ge,(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(l.users,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,(0,v.v_)(e.id),1),(0,s.Lk)("td",null,(0,v.v_)(e.email),1),(0,s.Lk)("td",null,(0,v.v_)(e.username),1),(0,s.Lk)("td",null,(0,v.v_)(e.first_name),1),(0,s.Lk)("td",null,(0,v.v_)(e.last_name),1),(0,s.Lk)("td",null,(0,v.v_)(e.phone),1),(0,s.Lk)("td",null,(0,v.v_)(e.address),1),(0,s.Lk)("td",null,(0,v.v_)(e.bio),1),(0,s.Lk)("td",null,[(0,s.Lk)("img",{src:e.photo,alt:"User Photo",class:"user-photo"},null,8,ze)]),(0,s.Lk)("td",null,(0,v.v_)(e.is_doctor?"Yes":"No"),1),(0,s.Lk)("td",null,(0,v.v_)(e.is_user?"Yes":"No"),1),(0,s.Lk)("td",null,[(0,s.Lk)("ul",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(e.groups,(e=>((0,s.uX)(),(0,s.CE)("li",{key:e},(0,v.v_)(e),1)))),128))])]),(0,s.Lk)("td",null,[(0,s.Lk)("button",{onClick:t=>n.editUser(e)},"Edit",8,Ye),(0,s.Lk)("button",{onClick:t=>n.deleteUser(e.id)},"Delete",8,Ze)])])))),128))])]),l.showEditModal?((0,s.uX)(),(0,s.CE)("div",et,[(0,s.Lk)("div",tt,[ot,rt,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.editedUser.username=e),id:"edit-username",type:"text"},null,512),[[r.Jo,l.editedUser.username]]),st,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[1]||(t[1]=e=>l.editedUser.email=e),id:"edit-email",type:"email"},null,512),[[r.Jo,l.editedUser.email]]),at,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.editedUser.groups=e),id:"edit-groups",type:"text",placeholder:"Enter comma-separated groups"},null,512),[[r.Jo,l.editedUser.groups]]),lt,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[3]||(t[3]=e=>l.editedUser.is_doctor=e),id:"edit-is-doctor",type:"checkbox"},null,512),[[r.lH,l.editedUser.is_doctor]]),nt,(0,s.bo)((0,s.Lk)("input",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.editedUser.is_user=e),id:"edit-is-user",type:"checkbox"},null,512),[[r.lH,l.editedUser.is_user]]),it,(0,s.Lk)("input",{type:"file",onChange:t[5]||(t[5]=(...e)=>n.onPhotoChange&&n.onPhotoChange(...e))},null,32),(0,s.Lk)("div",dt,[(0,s.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>n.saveEditedUser&&n.saveEditedUser(...e))},"Save"),(0,s.Lk)("button",{onClick:t[7]||(t[7]=(...e)=>n.closeEditModal&&n.closeEditModal(...e)),class:"cancel-button"},"Cancel")])])])):(0,s.Q3)("",!0)])}var ct={data(){return{users:[],showEditModal:!1,editedUser:{},newPhotoFile:null}},async created(){await this.fetchUsers()},methods:{async fetchUsers(){try{const e=await A.get("/users/");this.users=e.data}catch(e){console.error("Failed to load users",e)}},editUser(e){this.editedUser={...e},this.showEditModal=!0},async saveEditedUser(){try{if(!this.editedUser.id)return void console.error("No user ID found");const e=new FormData;e.append("username",this.editedUser.username),e.append("email",this.editedUser.email),e.append("first_name",this.editedUser.first_name),e.append("last_name",this.editedUser.last_name),e.append("phone",this.editedUser.phone),e.append("address",this.editedUser.address),e.append("bio",this.editedUser.bio),e.append("is_doctor",this.editedUser.is_doctor),e.append("is_user",this.editedUser.is_user),e.append("groups",this.editedUser.groups.join(",")),this.newPhotoFile&&e.append("photo",this.newPhotoFile);const t=await A.put(`/users/${this.editedUser.id}/`,e,{headers:{"Content-Type":"multipart/form-data"}});console.log("User updated:",t.data),alert("User updated successfully!"),this.closeEditModal(),await this.fetchUsers()}catch(e){console.error("Failed to update user",e.response?e.response.data:e.message)}},onPhotoChange(e){const t=e.target.files[0];t&&(this.newPhotoFile=t)},closeEditModal(){this.showEditModal=!1,this.newPhotoFile=null},async deleteUser(e){try{const t=confirm("Are you sure you want to delete this user?");t&&(await A.delete(`/users/${e}/`),this.users=this.users.filter((t=>t.id!==e)),alert("User deleted successfully!"))}catch(t){console.error("Failed to delete user",t)}}}};const pt=(0,i.A)(ct,[["render",ut],["__scopeId","data-v-2a8af02c"]]);var mt=pt,ht={name:"DashboardPage",components:{UserList:mt},data(){return{username:""}},async created(){try{const e=await A.get("profile/");this.username=e.data.username}catch(e){console.error("Failed to load user profile",e)}}};const ft=(0,i.A)(ht,[["render",Be],["__scopeId","data-v-1371cb3d"]]);var kt=ft;const gt=[{path:"/",name:"home",component:b},{path:"/login",name:"login",component:W},{path:"/register",name:"register",component:ee},{path:"/profile",name:"profile",component:Ne,meta:{requiresAuth:!0}},{path:"/dashboard",name:"dashboard",component:kt,meta:{requiresAuth:!0}}],Lt=(0,c.aE)({history:(0,c.LA)(),routes:gt});Lt.beforeEach(((e,t,o)=>{const r=e.matched.some((e=>e.meta.requiresAuth)),s=!!localStorage.getItem("accessToken");r&&!s?o("/login"):o()}));var bt=Lt;const vt=(0,r.Ef)(u);vt.use(bt),vt.mount("#app")}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var a=t[r]={exports:{}};return e[r].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,r,s,a){if(!r){var l=1/0;for(u=0;u<e.length;u++){r=e[u][0],s=e[u][1],a=e[u][2];for(var n=!0,i=0;i<r.length;i++)(!1&a||l>=a)&&Object.keys(o.O).every((function(e){return o.O[e](r[i])}))?r.splice(i--,1):(n=!1,a<l&&(l=a));if(n){e.splice(u--,1);var d=s();void 0!==d&&(t=d)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,s,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,r){var s,a,l=r[0],n=r[1],i=r[2],d=0;if(l.some((function(t){return 0!==e[t]}))){for(s in n)o.o(n,s)&&(o.m[s]=n[s]);if(i)var u=i(o)}for(t&&t(r);d<l.length;d++)a=l[d],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},r=self["webpackChunkmedical_project"]=self["webpackChunkmedical_project"]||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))}();var r=o.O(void 0,[504],(function(){return o(4384)}));r=o.O(r)})();
//# sourceMappingURL=app.c04a14bf.js.map